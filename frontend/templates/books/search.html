{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6 text-gray-900">Search Books</h1>
    
    <!-- Search Form -->
    <form method="get" class="mb-8">
        <div class="flex gap-4">
            <input 
                type="text" 
                name="q" 
                value="{{ query }}"
                placeholder="Search for books by title, author, or ISBN..."
                class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                autofocus
            />
            <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200">
                Search
            </button>
        </div>
    </form>
    
    <!-- Results Grid -->
    {% if query %}
    <div class="mb-4">
        <p class="text-gray-600">
            {% if books %}
                Found {{ books|length }} result{{ books|length|pluralize }} for "{{ query }}"
            {% else %}
                No results found for "{{ query }}"
            {% endif %}
        </p>
    </div>
    {% endif %}
    
    {% if books %}
    <div class="space-y-4">
        {% for book in books %}
        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-lg transition duration-200 flex items-start gap-4">
            <div class="flex-1">
                <h3 class="font-bold text-lg mb-2">{{ book.title }}</h3>
                
                {% if book.authors %}
                <p class="text-gray-600 text-sm mb-2">by {{ book.authors|join:", " }}</p>
                {% endif %}
                
                {% if book.published_date %}
                <p class="text-gray-500 text-xs mb-3">Published: {{ book.published_date|slice:":4" }}</p>
                {% endif %}
                
                <form method="post" action="{% url 'books:add' google_book_id=book.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                        Add to Catalog
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% elif query %}
    <div class="text-center py-12">
        <p class="text-gray-500 mb-4">No books found matching your search.</p>
        <p class="text-gray-400">Try different keywords or check your spelling.</p>
    </div>
    {% else %}
    <div class="text-center py-12">
        <p class="text-gray-500">Enter a search term to find books.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
