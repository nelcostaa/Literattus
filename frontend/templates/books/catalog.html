{% extends "base.html" %}

{% block content %}
<!-- Header with CTA -->
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 animate-fade-in gap-4">
    <div>
        <h1 class="text-4xl font-bold text-gray-900 mb-2">ðŸ“– My Book Catalog</h1>
        <p class="text-lg text-gray-600">
            {% if books %}
                You have <span class="font-semibold text-blue-600">{{ books|length }}</span> book{{ books|length|pluralize }} in your library
            {% else %}
                Your library is waiting for great books
            {% endif %}
        </p>
    </div>
    <a href="{% url 'books:search' %}" 
       class="btn-primary px-6 py-3 rounded-lg font-semibold inline-flex items-center gap-2 whitespace-nowrap justify-center">
        <i class="fas fa-plus-circle"></i> Add Books
    </a>
</div>

<!-- Books Grid -->
{% if books %}
<div class="book-grid animate-fade-in">
    {% for book in books %}
    <a href="{% url 'books:detail' book.id %}" class="book-card group">
        <!-- Book Cover -->
        <div class="book-cover relative overflow-hidden bg-gradient-to-br from-blue-100 to-cyan-100">
            {% if book.coverImage %}
                <img src="{{ book.coverImage }}" 
                     alt="{{ book.title }}"
                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
            {% else %}
                <div class="w-full h-full flex flex-col items-center justify-center text-center p-4 bg-gradient-to-br from-gray-200 to-gray-300">
                    <i class="fas fa-book text-5xl text-gray-400 mb-2"></i>
                    <span class="text-xs text-gray-600 font-semibold">{{ book.title|truncatewords:2 }}</span>
                </div>
            {% endif %}
            
            <!-- Hover Overlay -->
            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100">
                <div class="text-center">
                    <i class="fas fa-eye text-white text-3xl mb-2"></i>
                    <p class="text-white font-semibold text-sm">View Details</p>
                </div>
            </div>
        </div>

        <!-- Book Info -->
        <div class="book-info">
            <h3 class="book-title group-hover:text-blue-600 transition-colors">{{ book.title }}</h3>
            <p class="book-author">{{ book.author|default:"Unknown Author" }}</p>
            
            <div class="mt-3 pt-3 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500">
                {% if book.pageCount %}
                    <span><i class="fas fa-file-lines mr-1"></i> {{ book.pageCount }} pages</span>
                {% endif %}
                {% if book.publishedDate %}
                    <span><i class="fas fa-calendar mr-1"></i> {{ book.publishedDate|slice:":4" }}</span>
                {% endif %}
            </div>
            
            {% if book.averageRating and book.averageRating > 0 %}
            <div class="mt-3 flex items-center">
                <div class="flex text-yellow-400">
                    {% for i in "12345" %}
                        {% if forloop.counter <= book.averageRating %}
                            <i class="fas fa-star"></i>
                        {% else %}
                            <i class="far fa-star"></i>
                        {% endif %}
                    {% endfor %}
                </div>
                <span class="text-xs text-gray-600 ml-2">{{ book.averageRating|floatformat:1 }}</span>
            </div>
            {% endif %}
        </div>
    </a>
    {% endfor %}
</div>

<!-- Empty State -->
{% else %}
<div class="card p-12 text-center animate-slide-up">
    <div class="mb-6">
        <div class="w-24 h-24 mx-auto bg-gradient-to-br from-blue-100 to-cyan-100 rounded-full flex items-center justify-center">
            <i class="fas fa-books text-5xl text-blue-400"></i>
        </div>
    </div>
    <h2 class="text-3xl font-bold text-gray-900 mb-3">Your library is empty</h2>
    <p class="text-gray-600 mb-8 max-w-md mx-auto">
        Start building your personal collection of books. Search from millions of titles and track your reading journey!
    </p>
    <a href="{% url 'books:search' %}" class="btn-primary px-8 py-3 rounded-lg font-semibold inline-flex items-center gap-2">
        <i class="fas fa-search"></i> Search for Books
    </a>
</div>
{% endif %}

<!-- Stats Footer (if has books) -->
{% if books %}
<div class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-4">
    <div class="card p-4 text-center">
        <div class="text-2xl font-bold text-blue-600">{{ books|length }}</div>
        <p class="text-xs text-gray-600 mt-1">Total Books</p>
    </div>
    <div class="card p-4 text-center">
        <div class="text-2xl font-bold text-orange-500">3</div>
        <p class="text-xs text-gray-600 mt-1">Currently Reading</p>
    </div>
    <div class="card p-4 text-center">
        <div class="text-2xl font-bold text-cyan-500">5</div>
        <p class="text-xs text-gray-600 mt-1">Want to Read</p>
    </div>
    <div class="card p-4 text-center">
        <div class="text-2xl font-bold text-green-500">{{ books|length }}</div>
        <p class="text-xs text-gray-600 mt-1">Read</p>
    </div>
</div>
{% endif %}
{% endblock %}
